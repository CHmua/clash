;Custom_OpenClash_Rules - 增强优化版本
;全分组防 DNS 泄漏订阅转换模板
;基于 Aethersailor 原始配置进行深度优化改进
;优化内容：
;1. 新增更多现代化服务和平台支持
;2. 优化节点选择策略和负载均衡
;3. 增强游戏和流媒体体验
;4. 添加更多地区节点支持
;5. 改进金融服务和购物平台分流
;6. 新增开发者工具和云服务分组

[custom]
;===== 规则设置标志位 =====
;以下规则按优先级从高到低排列，优先命中上位规则

;===== 基础直连规则 =====
;本地地址和域名直连
ruleset=🎯 全球直连,[]GEOSITE,private
ruleset=🎯 全球直连,[]GEOIP,private,no-resolve

;自定义直连和代理规则
ruleset=🎯 全球直连,clash-classic:https://testingcf.jsdelivr.net/gh/Aethersailor/Custom_OpenClash_Rules@main/rule/Custom_Direct_Classical.yaml,28800
ruleset=🚀 手动选择,clash-classic:https://testingcf.jsdelivr.net/gh/Aethersailor/Custom_OpenClash_Rules@main/rule/Custom_Proxy_Classical.yaml,28800

;谷歌在国内可用的域名直连
ruleset=🎯 全球直连,[]GEOSITE,google-cn

;===== 国内服务直连优化 =====
;国内游戏和下载优化
ruleset=🎯 全球直连,[]GEOSITE,category-games@cn
ruleset=🎯 全球直连,clash-classic:https://testingcf.jsdelivr.net/gh/Aethersailor/Custom_OpenClash_Rules@main/rule/Steam_CDN_Classical.yaml,28800
ruleset=🎯 全球直连,[]GEOSITE,category-game-platforms-download
ruleset=🎯 全球直连,[]GEOSITE,category-public-tracker

;===== 通讯和社交平台 =====
;即时通讯：Telegram/WhatsApp/Line/Signal/Discord 等
ruleset=💬 即时通讯,[]GEOSITE,category-communication
;社交媒体：Twitter/Facebook/Instagram/LinkedIn 等
ruleset=🌐 社交媒体,[]GEOSITE,category-social-media-!cn

;===== AI 和机器学习服务 =====
;主流 AI 平台
ruleset=🤖 AI 服务,https://raw.githubusercontent.com/CHmua/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.list
ruleset=🤖 AI 服务,https://raw.githubusercontent.com/CHmua/ios_rule_script/master/rule/Clash/Copilot/Copilot.list
ruleset=🤖 AI 服务,https://raw.githubusercontent.com/CHmua/ios_rule_script/master/rule/Clash/Claude/Claude.list
ruleset=🤖 AI 服务,https://raw.githubusercontent.com/CHmua/ios_rule_script/refs/heads/master/rule/Clash/Gemini/Gemini.list
ruleset=🤖 AI 服务,https://raw.githubusercontent.com/CHmua/ios_rule_script/refs/heads/master/rule/Clash/meta.ai/meta.ai.list
;新兴 AI 平台
ruleset=🤖 AI 服务,https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/groq.mrs
ruleset=🤖 AI 服务,https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Grok.list
ruleset=🤖 AI 服务,https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/perplexity.mrs

;===== 开发和技术平台 =====
ruleset=💻 开发平台,[]GEOSITE,github
ruleset=📊 测速工具,[]GEOSITE,category-speedtest

;===== 游戏平台分流 =====
ruleset=🎮 Steam,[]GEOSITE,steam
ruleset=🎮 游戏平台,[]GEOSITE,category-games

;===== 流媒体服务优化 =====
;视频流媒体
ruleset=📺 YouTube,[]GEOSITE,youtube
ruleset=🎬 Netflix,[]GEOSITE,netflix
ruleset=🏰 DisneyPlus,[]GEOSITE,disney
ruleset=🎭 HBO,[]GEOSITE,hbo
ruleset=📦 PrimeVideo,[]GEOSITE,primevideo
ruleset=🍎 AppleTV+,[]GEOSITE,apple-tvplus
ruleset=🎥 Emby,[]GEOSITE,category-emby

;音频流媒体
ruleset=🎵 Spotify,[]GEOSITE,spotify
ruleset=🎶 TikTok,[]GEOSITE,tiktok

;地区性流媒体
ruleset=🐯 Bahamut,[]GEOSITE,bahamut

;===== 云服务和办公平台 =====
ruleset=🍎 苹果服务,[]GEOSITE,apple
ruleset=🔷 微软服务,[]GEOSITE,microsoft
ruleset=📧 谷歌FCM,[]GEOSITE,googlefcm
ruleset=🔍 谷歌服务,[]GEOSITE,google

;===== 金融和支付服务 =====
ruleset=💳 PayPal,[]GEOSITE,paypal

;===== 购物和电商平台 =====
ruleset=🛒 国外电商,[]GEOSITE,category-ecommerce

;===== 综合媒体和娱乐 =====
ruleset=🌍 国外媒体,[]GEOSITE,category-entertainment

;===== 突破网络封锁 =====
ruleset=🚀 手动选择,[]GEOSITE,gfw

;===== IP 地址分流规则 =====
ruleset=💬 即时通讯,[]GEOIP,telegram,no-resolve
ruleset=🌐 社交媒体,[]GEOIP,twitter,no-resolve
ruleset=🌐 社交媒体,[]GEOIP,facebook,no-resolve
ruleset=🔍 谷歌服务,[]GEOIP,google,no-resolve
ruleset=🎬 Netflix,[]GEOIP,netflix,no-resolve

;===== 国内网站和服务兜底 =====
;国内域名和 IP 直连兜底规则
ruleset=🎯 全球直连,[]GEOSITE,cn
ruleset=🎯 全球直连,[]GEOIP,cn,no-resolve

;===== 特殊端口和协议处理 =====
;PT/BT 下载优化，非标准端口流量处理
ruleset=🔀 非标端口,clash-classic:https://testingcf.jsdelivr.net/gh/Aethersailor/Custom_OpenClash_Rules@main/rule/Custom_Port_Direct.yaml,28800

;===== 最终兜底规则 =====
ruleset=🐟 漏网之鱼,[]FINAL

;===== 节点分组配置开始 =====

;===== 主控制组 =====
custom_proxy_group=🚀 手动选择`select`[]♻️ 自动选择`[]⚡ 负载均衡`[]🚀 故障转移`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🇼🇸 台湾节点`[]🇰🇷 韩国节点`[]🇨🇦 加拿大节点`[]🇬🇧 英国节点`[]🇫🇷 法国节点`[]🇩🇪 德国节点`[]🇳🇱 荷兰节点`[]🇹🇷 土耳其节点`[]🇦🇺 澳洲节点`[]🇮🇳 印度节点`[]🇧🇷 巴西节点`[]🌐 其他地区`.*

;===== 智能选择和负载均衡组 =====
custom_proxy_group=♻️ 自动选择`url-test`.*`https://www.gstatic.com/generate_204`180,,50
custom_proxy_group=⚡ 负载均衡`load-balance`.*`https://www.gstatic.com/generate_204`180,,50
custom_proxy_group=🚀 故障转移`fallback`.*`https://www.gstatic.com/generate_204`180,,50

;===== 应用服务专用分组 =====

;通讯和社交
custom_proxy_group=💬 即时通讯`select`[]♻️ 自动选择`[]🚀 手动选择`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇸🇬 新加坡节点`[]🇯🇵 日本节点`[]🇼🇸 台湾节点`[]🎯 全球直连
custom_proxy_group=🌐 社交媒体`select`[]🇺🇸 美国节点`[]🇭🇰 香港节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]♻️ 自动选择`[]🚀 手动选择`[]🎯 全球直连

;AI 和技术服务（优化地区选择）
custom_proxy_group=🤖 AI 服务`select`[]🇺🇸 美国节点`[]🇭🇰 香港节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🇨🇦 加拿大节点`[]🇬🇧 英国节点`[]🇦🇺 澳洲节点`[]♻️ 自动选择`[]🚀 手动选择
custom_proxy_group=💻 开发平台`select`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]♻️ 自动选择`[]🚀 手动选择`[]🎯 全球直连

;流媒体服务（针对性优化）
custom_proxy_group=📺 YouTube`select`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🇼🇸 台湾节点`[]♻️ 自动选择`[]🚀 手动选择
custom_proxy_group=🎬 Netflix`select`[]🇺🇸 美国节点`[]🇭🇰 香港节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🇬🇧 英国节点`[]🇨🇦 加拿大节点`[]🇦🇺 澳洲节点`[]🇧🇷 巴西节点`[]♻️ 自动选择`[]🚀 手动选择
custom_proxy_group=🏰 DisneyPlus`select`[]🇺🇸 美国节点`[]🇭🇰 香港节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🇦🇺 澳洲节点`[]♻️ 自动选择`[]🚀 手动选择
custom_proxy_group=🎭 HBO`select`[]🇺🇸 美国节点`[]🇭🇰 香港节点`[]🇸🇬 新加坡节点`[]♻️ 自动选择`[]🚀 手动选择
custom_proxy_group=📦 PrimeVideo`select`[]🇺🇸 美国节点`[]🇭🇰 香港节点`[]🇯🇵 日本节点`[]🇬🇧 英国节点`[]🇨🇦 加拿大节点`[]🇦🇺 澳洲节点`[]🇮🇳 印度节点`[]♻️ 自动选择`[]🚀 手动选择
custom_proxy_group=🍎 AppleTV+`select`[]🇺🇸 美国节点`[]🇭🇰 香港节点`[]🇯🇵 日本节点`[]🇦🇺 澳洲节点`[]🇬🇧 英国节点`[]♻️ 自动选择`[]🚀 手动选择
custom_proxy_group=🎥 Emby`select`[]♻️ 自动选择`[]🚀 手动选择`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🎯 全球直连

;音频和短视频
custom_proxy_group=🎵 Spotify`select`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🇬🇧 英国节点`[]🇦🇺 澳洲节点`[]♻️ 自动选择`[]🚀 手动选择
custom_proxy_group=🎶 TikTok`select`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🇰🇷 韩国节点`[]♻️ 自动选择`[]🚀 手动选择
custom_proxy_group=🐯 Bahamut`select`[]🇼🇸 台湾节点`[]🚀 手动选择`[]🎯 全球直连

;游戏平台（延迟优化）
custom_proxy_group=🎮 Steam`select`[]🎯 全球直连`[]🇭🇰 香港节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]♻️ 自动选择`[]🚀 手动选择
custom_proxy_group=🎮 游戏平台`select`[]♻️ 自动选择`[]🇭🇰 香港节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🇺🇸 美国节点`[]🇰🇷 韩国节点`[]🚀 手动选择`[]🎯 全球直连

;云服务和办公
custom_proxy_group=🍎 苹果服务`select`[]🎯 全球直连`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]♻️ 自动选择`[]🚀 手动选择
custom_proxy_group=🔷 微软服务`select`[]♻️ 自动选择`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🚀 手动选择`[]🎯 全球直连
custom_proxy_group=🔍 谷歌服务`select`[]♻️ 自动选择`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🚀 手动选择`[]🎯 全球直连
custom_proxy_group=📧 谷歌FCM`select`[]🎯 全球直连`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇸🇬 新加坡节点`[]♻️ 自动选择`[]🚀 手动选择

;金融和支付服务
custom_proxy_group=💳 PayPal`select`[]🇺🇸 美国节点`[]🇭🇰 香港节点`[]🇸🇬 新加坡节点`[]🇬🇧 英国节点`[]🇨🇦 加拿大节点`[]🇦🇺 澳洲节点`[]♻️ 自动选择`[]🚀 手动选择`[]🎯 全球直连

;购物和电商
custom_proxy_group=🛒 国外电商`select`[]🇺🇸 美国节点`[]🇭🇰 香港节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🇬🇧 英国节点`[]🇨🇦 加拿大节点`[]🇦🇺 澳洲节点`[]♻️ 自动选择`[]🚀 手动选择`[]🎯 全球直连

;其他服务
custom_proxy_group=🌍 国外媒体`select`[]♻️ 自动选择`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🇬🇧 英国节点`[]🚀 手动选择`[]🎯 全球直连
custom_proxy_group=📊 测速工具`select`[]♻️ 自动选择`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🚀 手动选择`[]🎯 全球直连

;===== 地区节点组（优化延迟检测）=====
custom_proxy_group=🇭🇰 香港节点`url-test`(港|HK|hk|Hong Kong|HongKong|hongkong|深港)`https://www.gstatic.com/generate_204`180,,30
custom_proxy_group=🇺🇸 美国节点`url-test`(美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|纽约|迈阿密|US|United States|UnitedStates)`https://www.gstatic.com/generate_204`180,,60
custom_proxy_group=🇯🇵 日本节点`url-test`(日本|川日|东京|大阪|泉日|埼玉|沪日|深日|(?<!尼|-)日|JP|Japan|🇯🇵)`https://www.gstatic.com/generate_204`180,,40
custom_proxy_group=🇸🇬 新加坡节点`url-test`(新加坡|坡|狮城|SG|Singapore)`https://www.gstatic.com/generate_204`180,,30
custom_proxy_group=🇼🇸 台湾节点`url-test`(台|新北|彰化|TW|Taiwan)`https://www.gstatic.com/generate_204`180,,40
custom_proxy_group=🇰🇷 韩国节点`url-test`(KR|Korea|KOR|首尔|韩|韓)`https://www.gstatic.com/generate_204`180,,40
custom_proxy_group=🇨🇦 加拿大节点`url-test`(加拿大|Canada|渥太华|温哥华|卡尔加里|多伦多)`https://www.gstatic.com/generate_204`180,,70
custom_proxy_group=🇬🇧 英国节点`url-test`(英国|Britain|United Kingdom|England|伦敦|曼彻斯特)`https://www.gstatic.com/generate_204`180,,80
custom_proxy_group=🇫🇷 法国节点`url-test`(法国|France|巴黎)`https://www.gstatic.com/generate_204`180,,100
custom_proxy_group=🇩🇪 德国节点`url-test`(德国|Germany|柏林|法兰克福|慕尼黑)`https://www.gstatic.com/generate_204`180,,100
custom_proxy_group=🇳🇱 荷兰节点`url-test`(荷兰|Netherlands|阿姆斯特丹)`https://www.gstatic.com/generate_204`180,,100
custom_proxy_group=🇹🇷 土耳其节点`url-test`(土耳其|Turkey|Türkiye|伊斯坦布尔)`https://www.gstatic.com/generate_204`180,,120
custom_proxy_group=🇦🇺 澳洲节点`url-test`(澳|澳洲|澳大利亚|Australia|Sydney|Melbourne|悉尼|墨尔本)`https://www.gstatic.com/generate_204`180,,120
custom_proxy_group=🇮🇳 印度节点`url-test`(印度|India|孟买|新德里|班加罗尔|Mumbai|Delhi|Bangalore)`https://www.gstatic.com/generate_204`180,,150
custom_proxy_group=🇧🇷 巴西节点`url-test`(巴西|Brazil|圣保罗|里约|Sao Paulo|Rio)`https://www.gstatic.com/generate_204`180,,200

;其他地区节点（排除已定义的所有地区）
custom_proxy_group=🌐 其他地区`url-test`(^(?!.*(港|HK|hk|Hong Kong|HongKong|hongkong|深港|美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|纽约|迈阿密|US|United States|UnitedStates|日本|川日|东京|大阪|泉日|埼玉|沪日|深日|(?<!尼|-)日|JP|Japan|🇯🇵|新加坡|坡|狮城|SG|Singapore|台|新北|彰化|TW|Taiwan|KR|Korea|KOR|首尔|韩|韓|加拿大|Canada|渥太华|温哥华|卡尔加里|多伦多|英国|Britain|United Kingdom|England|伦敦|曼彻斯特|法国|France|巴黎|德国|Germany|柏林|法兰克福|慕尼黑|荷兰|Netherlands|阿姆斯特丹|土耳其|Turkey|Türkiye|伊斯坦布尔|澳|澳洲|澳大利亚|Australia|Sydney|Melbourne|悉尼|墨尔本|印度|India|孟买|新德里|班加罗尔|Mumbai|Delhi|Bangalore|巴西|Brazil|圣保罗|里约|Sao Paulo|Rio)).*)`https://www.gstatic.com/generate_204`180,,200

;===== 功能性分组 =====
custom_proxy_group=🐟 漏网之鱼`select`[]♻️ 自动选择`[]🚀 手动选择`[]🇭🇰 香港节点`[]🇺🇸 美国节点`[]🇯🇵 日本节点`[]🇸🇬 新加坡节点`[]🎯 全球直连
custom_proxy_group=🔀 非标端口`select`[]🐟 遵循规则`[]🎯 全球直连
custom_proxy_group=🎯 全球直连`select`[]DIRECT
custom_proxy_group=🐟 遵循规则`select`[]🐟 漏网之鱼

;===== 配置结束 =====
;下方参数请勿修改
enable_rule_generator=true
overwrite_original_rules=true
